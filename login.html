<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Vintage Store ‚Äî Login / Cadastro</title>
  <link rel="stylesheet" href="login.css">
</head>

<body>
  <header>Vintage Store</header>

  <div class="main-area">
    <!-- Pet -->
    <div class="pet-area">
      <img src="pet.png" alt="Mascote Vintage Store" id="petImg">
      <div id="speechBubble" class="speech hidden">Ol√°! Vamos come√ßar? üêæ</div>
    </div>

    <!-- Formul√°rio -->
    <div class="container auth">
      <div class="tabs">
        <div class="tab active" data-tab="login-pane">Login</div>
        <div class="tab" data-tab="register-pane">Cadastrar</div>
      </div>

      <div id="authMsg" class="msg"></div>
<!-- LOGIN (igual ao seu atual, sem altera√ß√µes) -->
<div class="pane active" id="login-pane">
  <form id="loginForm">
    <div class="field">
      <label for="loginEmail">E-mail</label>
      <input type="email" id="loginEmail" placeholder="Digite seu e-mail" required>
    </div>
    <div class="field">
      <label for="loginPass">Senha</label>
      <input type="password" id="loginPass" placeholder="Digite sua senha" required>
    </div>
    <div class="field">
      <a href="#" id="forgotPassword">Esqueceu a senha?</a>
    </div>
    <button type="submit">Entrar</button>
  </form>
</div>

<!-- MODAL DE RECUPERA√á√ÉO DE SENHA -->
<div id="resetModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; 
    background: rgba(0,0,0,0.5); justify-content:center; align-items:center;">
  <div id="modalContent" style="background:white; padding:20px; border-radius:8px; max-width:400px; width:90%; text-align:center; position:relative;">
    <h3>Redefinir senha</h3>
    <p>Digite seu e-mail para receber o link de redefini√ß√£o:</p>
    <input type="email" id="resetEmail" placeholder="Seu e-mail" style="width:80%; padding:8px; margin:10px 0;">
    <div style="margin-top:10px;">
      <button id="sendReset" type="button" style="margin-right:10px;">Enviar</button>
      <button id="closeModal" type="button">Cancelar</button>
    </div>
  </div>
</div>

      <script type="module">
  import { supabase } from './supabase.js'; // caminho para seu supabase.js

  const forgotBtn = document.getElementById('forgotPassword');
  const resetModal = document.getElementById('resetModal');
  const closeModal = document.getElementById('closeModal');
  const sendReset = document.getElementById('sendReset');

  forgotBtn.addEventListener('click', (e) => {
    e.preventDefault();
    resetModal.style.display = 'flex';
  });

  closeModal.addEventListener('click', () => {
    resetModal.style.display = 'none';
  });

  resetModal.addEventListener('click', (e) => {
    if (e.target === resetModal) resetModal.style.display = 'none';
  });

  sendReset.addEventListener('click', async () => {
    const email = document.getElementById('resetEmail').value;
    if (!email) {
      alert('Digite seu e-mail.');
      return;
    }

    const { data, error } = await supabase.auth.resetPasswordForEmail(email);
    if (error) {
      alert('Erro ao enviar e-mail: ' + error.message);
    } else {
      alert('E-mail de recupera√ß√£o enviado! Verifique sua caixa de entrada.');
      resetModal.style.display = 'none';
    }
  });
</script>

      <!-- CADASTRO -->
      <div class="pane" id="register-pane">
        <form id="registerForm">
          <div class="field">
            <label for="regEmail">E-mail</label>
            <input type="email" id="regEmail" placeholder="Digite seu e-mail" required>
          </div>
          <div class="field">
            <label for="regSenha">Senha</label>
            <input type="password" id="regSenha" placeholder="Crie uma senha" required>
          </div>
          <div class="field">
            <label for="regUsuario">Nome de usu√°rio</label>
            <input type="text" id="regUsuario" placeholder="Escolha um nome de usu√°rio" required>
          </div>
          <button type="submit">Cadastrar-se</button>
        </form>
      </div>
    </div>
  </div>

  <script type="module" src="login.js"></script>
</body>
</html>
